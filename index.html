<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
        // This causes a crash
        // const icalContent = `
        //   BEGIN:VCALENDAR
        //   VERSION:2.0
        //   PRODID:-//Your Organization//Your Product//EN
        //   BEGIN:VEVENT
        //   UID:${eventDetails.uid}
        //   DTSTAMP:${eventDetails.timestamp}
        //   DTSTART:${eventDetails.start}
        //   DTEND:${eventDetails.end}
        //   SUMMARY:${eventDetails.summary}
        //   DESCRIPTION:${eventDetails.description}
        //   LOCATION:${eventDetails.location}
        //   END:VEVENT
        //   END:VCALENDAR`;

        const ICAL_CONTENT = `BEGIN:VCALENDAR
        VERSION:2.0
        PRODID:-//Your Organization//Your Product//EN
        BEGIN:VEVENT
        UID:uid1@example.com
        DTSTAMP:20231010T090000Z
        DTSTART:20231010T090000Z
        DTEND:20231010T100000Z
        SUMMARY:Sample Event
        DESCRIPTION:This is a sample event description.
        LOCATION:Wonderland
        END:VEVENT
        END:VCALENDAR`
          .split("\n")
          .map(s => s.trim())
          .join("\n");

        const blob = new Blob([ICAL_CONTENT], {type: "text/calendar;charset=utf-8"});
        const blobUrl = URL.createObjectURL(blob);

        const downloadLink = document.createElement("a");
        downloadLink.href = blobUrl;
        downloadLink.textContent = "Download iCal File";
        document.body.appendChild(downloadLink);
    </script>
  </body>
</html>
